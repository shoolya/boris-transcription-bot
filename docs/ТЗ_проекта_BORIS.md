# Техническое задание проекта BORIS

## Общая информация
**Название проекта**: BORIS - Бот Обработки Разговоров Интеллектуального Суммирования  
**Тип**: PWA (Progressive Web Application)  
**Домен**: boris.laspan.ru  
**Статус**: В разработке  

## Описание проекта
BORIS - это веб-приложение для автоматической транскрибации голосовых разговоров с последующим формированием структурированных тезисов и экспортом в различные форматы документов.

## Основной функционал

### 1. Загрузка аудио
- Запись голоса в реальном времени через браузер
- Загрузка аудиофайлов (поддерживаемые форматы: MP3, WAV, M4A, OGG)
- Максимальная длительность: до 8 часов
- Максимальный размер файла: 2GB

### 2. Транскрибация
- Интеграция с Яндекс SpeechKit для распознавания речи
- Поддержка русского и английского языков
- Автоматическое определение спикеров
- Нормализация текста (исправление пунктуации, форматирование)

### 3. Формирование тезисов
- Автоматическое извлечение ключевых моментов
- Структурирование по категориям:
  - Договоренности
  - Задачи и сроки
  - Участники и их роли
  - Основные решения
- Возможность ручного редактирования тезисов

### 4. Экспорт документов
- DOCX (основной формат)
- PDF
- TXT (простой текст)

### 5. История и управление
- Сохранение всех загруженных файлов
- История транскрибаций
- История тезисов
- Возможность удаления записей
- Поиск по истории

## Технические требования

### Архитектура
- **Тип**: Микросервисная архитектура (первый сервис)
- **Бэкенд**: Node.js + Express.js
- **Фронтенд**: React + TypeScript
- **База данных**: PostgreSQL (Docker)
- **Хранилище файлов**: Yandex Object Storage
- **Очереди задач**: Redis + Bull для асинхронной обработки

### Производительность
- **Одновременных пользователей**: 10
- **Время отклика**: < 2 секунд для UI
- **Время транскрибации**: зависит от длительности аудио
- **Масштабируемость**: горизонтальное масштабирование через Docker

### Безопасность
- Аутентификация по email
- JWT токены
- HTTPS
- Валидация файлов
- Ограничение размера загружаемых файлов

## Технологический стек

### Бэкенд
- **Runtime**: Node.js 18+
- **Framework**: Express.js
- **База данных**: PostgreSQL 15+
- **ORM**: Prisma
- **Очереди**: Redis + Bull
- **Хранилище**: Yandex Object Storage SDK
- **API**: REST + WebSocket для real-time уведомлений

### Фронтенд
- **Framework**: React 18+
- **Язык**: TypeScript
- **Стили**: Tailwind CSS
- **Состояние**: Zustand
- **HTTP клиент**: Axios
- **PWA**: Workbox

### Инфраструктура
- **Контейнеризация**: Docker + Docker Compose
- **Облако**: Yandex Cloud
- **SpeechKit**: Yandex SpeechKit API
- **Мониторинг**: Winston для логирования

## Структура проекта

```
BORIS/
├── frontend/                 # React PWA приложение
├── backend/                  # Node.js API сервер
├── docker/                   # Docker конфигурация
├── docs/                     # Документация
└── scripts/                  # Скрипты развертывания
```

## API Endpoints

### Аутентификация
- `POST /api/auth/register` - Регистрация
- `POST /api/auth/login` - Вход
- `POST /api/auth/refresh` - Обновление токена

### Аудио
- `POST /api/audio/upload` - Загрузка аудио
- `POST /api/audio/record` - Запись в реальном времени
- `GET /api/audio/:id` - Получение информации об аудио
- `DELETE /api/audio/:id` - Удаление аудио

### Транскрибация
- `POST /api/transcribe/:audioId` - Запуск транскрибации
- `GET /api/transcribe/:id` - Статус транскрибации
- `GET /api/transcribe/:id/result` - Результат транскрибации

### Тезисы
- `GET /api/summary/:transcribeId` - Получение тезисов
- `PUT /api/summary/:id` - Редактирование тезисов
- `DELETE /api/summary/:id` - Удаление тезисов

### Экспорт
- `GET /api/export/:type/:id` - Экспорт документа
- `GET /api/export/history` - История экспорта

### История
- `GET /api/history` - История пользователя
- `DELETE /api/history/:id` - Удаление записи

## База данных

### Основные таблицы
- `users` - Пользователи
- `audio_files` - Аудиофайлы
- `transcriptions` - Транскрибации
- `summaries` - Тезисы
- `export_history` - История экспорта
- `jobs` - Очереди задач

## Процесс работы пользователя

1. **Регистрация/Вход** на boris.laspan.ru
2. **Загрузка аудио** (запись или файл)
3. **Ожидание транскрибации** (с прогресс-баром)
4. **Просмотр результата** транскрибации
5. **Формирование тезисов** (автоматически + возможность редактирования)
6. **Экспорт документов** в нужном формате
7. **Сохранение в истории** для последующего доступа

## Требования к развертыванию

### Docker
- PostgreSQL контейнер
- Redis контейнер
- Backend контейнер
- Frontend контейнер
- Nginx для проксирования

### Переменные окружения
- `DATABASE_URL` - строка подключения к PostgreSQL
- `REDIS_URL` - строка подключения к Redis
- `YANDEX_CLOUD_ACCESS_KEY` - ключ доступа к Yandex Cloud
- `YANDEX_CLOUD_SECRET_KEY` - секретный ключ
- `SPEECHKIT_API_KEY` - API ключ SpeechKit
- `JWT_SECRET` - секрет для JWT токенов

## Этапы разработки

### Этап 1: Базовая инфраструктура
- Настройка Docker окружения
- Базовая структура бэкенда
- Простая аутентификация

### Этап 2: Основной функционал
- Интеграция с SpeechKit
- Система очередей
- Базовый фронтенд

### Этап 3: Расширенный функционал
- Формирование тезисов
- Экспорт документов
- История и управление

### Этап 4: Оптимизация и тестирование
- Производительность
- Тестирование
- Документация

## Ссылки на документацию

- [Yandex Cloud SpeechKit](https://yandex.cloud/ru/docs/speechkit/)
- [Yandex Object Storage](https://yandex.cloud/ru/docs/storage/)
- [Node.js](https://nodejs.org/docs/)
- [Express.js](https://expressjs.com/)
- [PostgreSQL](https://www.postgresql.org/docs/)
- [Docker](https://docs.docker.com/)
- [React](https://react.dev/)
- [TypeScript](https://www.typescriptlang.org/docs/)

## Риски и ограничения

### Технические риски
- Ограничения SpeechKit по длительности аудио
- Зависимость от внешних API
- Масштабирование для длительных транскрибаций

### Бизнес-риски
- Стоимость использования SpeechKit
- Качество распознавания для разных акцентов
- Конфиденциальность данных

## Метрики успеха

- Время транскрибации 1 часа аудио < 30 минут
- Точность распознавания > 90%
- Время отклика UI < 2 секунд
- Поддержка 10 одновременных пользователей
- Uptime > 99.5%
